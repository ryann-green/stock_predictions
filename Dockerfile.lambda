FROM public.ecr.aws/lambda/python:3.10

# Set working directory
WORKDIR /var/task

# Copy all source code and requirements
COPY signalxplnd-app/ .

# Install Python packages into /var/task
RUN pip install --upgrade pip && \
    pip install --target . -r requirements.txt --no-cache-dir && \
    pip list && \
    python -c "import dash; print('âœ… Dash installed')"

# Define Lambda handler
CMD ["lambda_handler.lambda_handler"]
